<?xml version="1.0" encoding="utf-8"?>
<InstructionData xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <DateTime>133782772578342111</DateTime>
  <GameVersion>0.2.5321.24005</GameVersion>
  <Title>SolidGenManager</Title>
  <Description>Checks all batteries networked for their charge, toggles solid gens on when charge less than 30%, toggles off when charge greater than 90%â€‹</Description>
  <Author>Rizzard of Oz</Author>
  <WorkshopFileHandle>0</WorkshopFileHandle>
  <Instructions>alias batteryGridPercentage r2
alias batteryGridCharge r3
alias batteryGridMaxCharge r4

alias allBatteryMaxCharge r5
alias allLargeBatteryMaxCharge r6
alias allBatteryCharge r7
alias allLargeBatteryCharge r8

define allBatteries -400115994
define allLargeBatteries -1388288459
define allGasFuelGenerators 813146305

start:
sb allGasFuelGenerators On 0
checkCurrentGridCharge:
lb allBatteryMaxCharge allBatteries Maximum Sum
lb allLargeBatteryMaxCharge allLargeBatteries Maximum Sum
add batteryGridMaxCharge allBatteryMaxCharge allLargeBatteryMaxCharge

lb allBatteryCharge allBatteries Charge Sum
lb allLargeBatteryCharge allLargeBatteries Charge Sum
add batteryGridCharge allBatteryCharge allLargeBatteryCharge

div batteryGridPercentage batteryGridCharge batteryGridMaxCharge

blt batteryGridPercentage 0.3 turnAllSolidFuelGeneratorsOn

s db Setting batteryGridPercentage
yield
j checkCurrentGridCharge

turnAllSolidFuelGeneratorsOn:
sb allGasFuelGenerators On 1
waitUntilBatteries90percent:
lb allBatteryMaxCharge allBatteries Maximum Sum
lb allLargeBatteryMaxCharge allLargeBatteries Maximum Sum
add batteryGridMaxCharge allBatteryMaxCharge allLargeBatteryMaxCharge

lb allBatteryCharge allBatteries Charge Sum
lb allLargeBatteryCharge allLargeBatteries Charge Sum
add batteryGridCharge allBatteryCharge allLargeBatteryCharge

div batteryGridPercentage batteryGridCharge batteryGridMaxCharge

bgt batteryGridPercentage 0.9 turnAllSolidFuelGeneratorsOff

s db Setting batteryGridPercentage
yield
j waitUntilBatteries90percent
turnAllSolidFuelGeneratorsOff:
sb allGasFuelGenerators On 0
j checkCurrentGridCharge</Instructions>
</InstructionData>